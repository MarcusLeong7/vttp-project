<mat-toolbar color="primary" class="app-header">
  <div class="container-fluid header-container">
    <!-- Brand Logo and Name -->
    <a class="brand-link" routerLink="/home">
      <span class="brand-name">NutriSense</span>
    </a>

    <!-- Spacer to push navigation to the right -->
    <span class="spacer"></span>

    @if (currentUser) {
      <!-- Navigation Items -->
      <div class="nav-items">
        <a mat-button routerLink="/home" routerLinkActive="active-link">
          <mat-icon>home</mat-icon>
          <span>Home</span>
        </a>

        <!-- Meals dropdown menu -->
        <button mat-button [matMenuTriggerFor]="mealsMenu">
          <mat-icon>restaurant</mat-icon>
          <span>Meals</span>
          <mat-icon>arrow_drop_down</mat-icon>
        </button>
        <mat-menu #mealsMenu="matMenu">
          <a mat-menu-item routerLink="/meals/search">
            <mat-icon>search</mat-icon>
            <span>Search Meals</span>
          </a>
          <a mat-menu-item routerLink="/meals/saved">
            <mat-icon>bookmark</mat-icon>
            <span>My Saved Meals</span>
          </a>
        </mat-menu>

        <!-- Meal Plans Menu Item (New) -->
        <a mat-button routerLink="/meal-plans" routerLinkActive="active-link">
          <mat-icon>menu_book</mat-icon>
          <span>Meal Plans</span>
        </a>

        <!-- Workout dropdown menu -->
        <button mat-button [matMenuTriggerFor]="workoutsMenu">
          <mat-icon>fitness_center</mat-icon>
          <span>Workouts</span>
          <mat-icon>arrow_drop_down</mat-icon>
        </button>
        <mat-menu #workoutsMenu="matMenu">
          <a mat-menu-item routerLink="/workouts/search">
            <mat-icon>search</mat-icon>
            <span>Search Workouts</span>
          </a>
          <a mat-menu-item routerLink="/workouts/saved">
            <mat-icon>bookmark</mat-icon>
            <span>My Saved Workouts</span>
          </a>
        </mat-menu>
        <a mat-button routerLink="/schedule" routerLinkActive="active-link">
          <mat-icon>calendar_today</mat-icon>
          <span>Schedule</span>
        </a>

        <!-- User Menu -->
        <button mat-button [matMenuTriggerFor]="userMenu" class="user-menu-button">
          <mat-icon>account_circle</mat-icon>
          <span class="user-email">{{ currentUserEmail }}</span>
          <mat-icon>arrow_drop_down</mat-icon>
        </button>

        <mat-menu #userMenu="matMenu" xPosition="before">
          <button mat-menu-item [routerLink]="['/profile']">
            <mat-icon>person</mat-icon>
            <span>Profile</span>
          </button>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="logout()">
            <mat-icon>exit_to_app</mat-icon>
            <span>Logout</span>
          </button>
        </mat-menu>
      </div>
    }
  </div>
</mat-toolbar>
